(function(e){function t(t){for(var s,a,i=t[0],c=t[1],u=t[2],l=0,p=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],s=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(s=!1)}s&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},o={app:0},r=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"019a":function(e,t,n){"use strict";n("38be")},"034f":function(e,t,n){"use strict";n("85ec")},"0b60":function(e,t,n){"use strict";n("b50f")},"0c40":function(e,t,n){"use strict";n("164a")},1:function(e,t){},"145b":function(e,t,n){},1590:function(e,t,n){"use strict";n("145b")},"164a":function(e,t,n){},"18e0":function(e,t,n){"use strict";n("c25e")},2:function(e,t){},"26c9":function(e,t,n){},"286c":function(e,t,n){},3:function(e,t){},3373:function(e,t,n){},"35b8":function(e,t,n){e.exports=n.p+"img/stitch.0f1c05ab.jpg"},"38be":function(e,t,n){},4:function(e,t){},"4d97":function(e,t,n){},"4eff":function(e,t,n){"use strict";n("8907")},5:function(e,t){},"507e":function(e,t){e.exports="data:image/png;base64,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"},"56d7":function(e,t,n){"use strict";n.r(t);n("e623"),n("e379"),n("5dc8"),n("37e1");var s=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header"),n("router-view")],1)},r=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"header"}},[n("div",{staticClass:"col-20",attrs:{id:"logo"}},[n("router-link",{attrs:{to:"/"}},[e._v(" Safebook ")])],1),n("div",{staticClass:"col-40"}),n("div",{staticClass:"col-40",attrs:{id:"logout"}},[e.account?e._e():n("div",[n("a",{on:{click:function(t){return e.goToHome()}}},[e._v("Accueil")]),n("div",{staticClass:"space"}),e._v(" "),n("div",{staticClass:"space"}),n("a",{on:{click:function(t){return e.signin()}}},[e._v("Connexion")])]),e.account?n("div",[n("a",{on:{click:function(t){return e.goToAccount()}}},[e._v("Ma page")]),n("div",{staticClass:"space"}),n("a",{on:{click:function(t){return e.goToMessaging()}}},[e._v("Messagerie")]),n("div",{staticClass:"space"}),n("a",{on:{click:function(t){return e.logout()}}},[e._v("Déconnexion")])]):e._e()])])},i=[],c={name:"Header",methods:{logout:function(){this.$store.commit("logout"),this.$router.push("/")},goToHome:function(){this.$router.push("/")},goToAccount:function(){this.$router.push("/u/".concat(this.$store.state.account.address))},goToMessaging:function(){this.$router.push("/m")},signin:function(){this.$router.push("/signin")}},computed:{account:function(){return this.$store.state.account}}},u=c,d=(n("f9de"),n("2877")),l=Object(d["a"])(u,a,i,!1,null,"581fbfba",null),p=l.exports,h={name:"App",components:{Header:p},mounted:function(){this.$store.commit("restoreAccount")}},m=h,f=(n("034f"),Object(d["a"])(m,o,r,!1,null,null,null)),v=f.exports,g=n("8c4f"),b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"table",attrs:{id:"home"}},[s("div",{attrs:{id:"side"}},[s("img",{attrs:{alt:"Vue logo",src:n("cf05")}}),s("h3",[e._v("Safebook")]),s("p",[e._v(" réseau social cryptographique ")]),s("div",{attrs:{id:"doc"}},[s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/what")}}},[e._v(" Documentation utilisateur ")]),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/how")}}},[e._v(" Documentation technique ")]),s("button",{staticClass:"button",on:{click:function(t){return e.$router.push("/about")}}},[e._v(" A propos ")])])]),s("div",{attrs:{id:"main"}},[s("div",[s("button",{staticClass:"button",attrs:{id:"signup"},on:{click:function(t){return e.createAccount()}}},[e._v(" Créer un compte ")])]),s("p",[e._v(" --- ou --- ")]),s("div",[e._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{id:"password",type:"password",placeholder:"Mot de passe"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),s("div",[s("button",{staticClass:"button",class:{active:e.password.length>0},attrs:{id:"signin"},on:{click:function(t){return e.signin()}}},[e._v(" Se connecter ")])])])])},A=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h4",[e._v("Entrez votre mot de passe, "),n("br"),e._v(" ou votre phrase mnémotechnique")])}],w=(n("498a"),{name:"Home",data:function(){return{password:""}},methods:{createAccount:function(){this.$store.commit("createAccount"),this.$router.push("/signup")},signin:function(){this.$store.commit({type:"loadAccount",mnemonic:this.password.trim()})},goToUserDoc:function(){this.$router.push("/what")},goToTechnicalDoc:function(){window.location="https://github.com/mjal/safebook-doc/blob/master/technical.org"}}}),_=w,y=(n("019a"),Object(d["a"])(_,b,A,!1,null,"9c8a0ae8",null)),C=y.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"signup"}},[n("h3",[e._v("Bonjour "),n("span",{attrs:{id:"name"}},[e._v(e._s(e.account.name.join(" ")))])]),n("h3",[e._v("Votre crypto-addresse :")]),n("div",[n("AddressSquared",{attrs:{address:e.account.address}}),n("div",{attrs:{id:"or"}},[e._v(" ou ")]),n("AddressQR",{attrs:{address:e.account.address}})],1),e.generating?n("p",{attrs:{id:"generating"}},[n("a",{attrs:{href:"#"},on:{click:function(t){return e.stop()}}},[e._v("arreter maintenant")])]):e._e(),e.generating?e._e():n("div",[n("p",[e._v(" Gardez précieusement votre mot de passe "),n("a",{attrs:{href:"#"},on:{click:function(t){e.showPassword=!e.showPassword}}},[e._v("("+e._s(e.showPassword?"cacher":"afficher")+")")])]),e.showPassword?n("p",{attrs:{id:"password"}},[e._v(" "+e._s(e.account.entropy)+" ")]):e._e(),n("p",[e._v(" Ou votre phrase mnémotechnique "),n("a",{attrs:{href:"#"},on:{click:function(t){e.showPassphrase=!e.showPassphrase}}},[e._v("("+e._s(e.showPassphrase?"cacher":"afficher")+")")])]),e.showPassphrase?n("p",{attrs:{id:"passphrase"}},e._l(e.account.mnemonic.split(" "),(function(t){return n("span",{key:t,staticClass:"word"},[n("span",[e._v(e._s(t)+" ")])])})),0):e._e(),n("p",{staticClass:"center"},[n("button",{staticClass:"button",attrs:{id:"regenerate"},on:{click:function(t){return e.regenerate()}}},[e._v("Regenerer")]),n("button",{staticClass:"button",attrs:{id:"start"},on:{click:function(t){return e.start()}}},[e._v("Ma page")])])])])},S=[],x=(n("ac1f"),n("1276"),n("fb6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"addressSquared"}},e._l(e.lines,(function(t){return n("div",{key:t,staticClass:"line"},[e._v(" "+e._s(t)+" ")])})),0)}),j=[],P={props:{address:String},computed:{lines:function(){return[this.address.substr(0,13),this.address.substr(13,13),this.address.substr(26,13),this.address.substr(39)]}}},O=P,E=(n("0b60"),Object(d["a"])(O,x,j,!1,null,null,null)),T=E.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"qrcode"}},[n("vue-qr",{attrs:{text:e.url,size:130}})],1)},M=[],B=(n("99af"),n("18ae")),N="http://localhost:3000",Q="http://localhost:3000",q="http://localhost:8080",U={url:N,api:Q,vue_url:q},V={name:"AddressQR",components:{VueQr:B["a"]},props:{address:String},computed:{url:function(){return"".concat(U.url,"/u/").concat(this.address)}}},z=V,D=(n("4eff"),Object(d["a"])(z,I,M,!1,null,null,null)),Y=D.exports,H={name:"Signup",components:{AddressQR:Y,AddressSquared:T},data:function(){return{showPassword:!1,showPassphrase:!1,generating:!1}},computed:{account:function(){return this.$store.state.account},splittedMnemonic:function(){var e=this.account.mnemonic.split(" ");return[e.slice(0,3),e.slice(3,6),e.slice(6,9),e.slice(9)]}},methods:{regenerate:function(){this.$store.commit("createAccount")},vanity:function(){this.$store.commit("createVanityAccount")},stop:function(){this.generating=!1},start:function(){this.$router.push("/u/".concat(this.account.address))}},beforeCreate:function(){this.$store.state.account||this.$router.push("/")},created:function(){}},J=H,L=(n("61ee"),Object(d["a"])(J,k,S,!1,null,"2b928761",null)),R=L.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"signin"}},[n("h3",[e._v("Entrez votre mot de passe ou phrase mnémotechnique")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.passphrase,expression:"passphrase"}],attrs:{placeholder:"Votre mot de passe"},domProps:{value:e.passphrase},on:{input:function(t){t.target.composing||(e.passphrase=t.target.value)}}}),n("p",[n("button",{staticClass:"button",on:{click:function(t){return e.loadAccount()}}},[e._v("Se connecter")])]),n("p",[n("a",{on:{click:function(t){return e.signup()}}},[e._v("Creer un compte")])])])},G=[],$={name:"Signup",data:function(){return{passphrase:""}},methods:{loadAccount:function(){this.$store.commit({type:"loadAccount",mnemonic:this.passphrase.trim()}),this.$router.push("/signup")},signup:function(){this.$store.commit("createAccount"),this.$router.push("/signup")}}},W=$,K=(n("1590"),Object(d["a"])(W,F,G,!1,null,"6082e76b",null)),Z=K.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table",attrs:{id:"user"}},[n("div",{attrs:{id:"side"}},[n("Avatar",{attrs:{address:e.address}}),e.myself?n("div",[n("button",{staticClass:"button",attrs:{id:"account"},on:{click:function(t){return e.$router.push("/signup")}}},[e._v("Mon compte")])]):e._e(),e.myself?e._e():n("div",[n("button",{staticClass:"button",attrs:{id:"privateMessage"},on:{click:function(t){return e.goToMessaging()}}},[e._v("Envoyer un message privé")]),n("button",{staticClass:"button",attrs:{id:"privateMessage"},on:{click:function(t){return e.goToMessaging()}}},[e._v("Envoyer un lettre")]),n("button",{staticClass:"button",attrs:{id:"addContact"},on:{click:function(t){return e.addContact()}}},[e._v("Ajouter comme contact")])])],1),n("div",{attrs:{id:"main"}},[n("SignedMessageInput",{attrs:{address:e.address}}),n("div",{attrs:{id:"scope"}},[n("hr"),n("h4",[n("a",{class:{active:"published"==e.scope},on:{click:function(t){e.scope="published"}}},[e._v("Publiés ("+e._s(e.published.length)+")")])]),n("h4",[n("a",{class:{active:"inbox"==e.scope},on:{click:function(t){e.scope="inbox"}}},[e._v("Reçus ("+e._s(e.inbox.length)+")")])]),n("h4",[n("a",{class:{active:"outbox"==e.scope},on:{click:function(t){e.scope="outbox"}}},[e._v("Envoyés ("+e._s(e.outbox.length)+")")])]),n("hr")]),"published"==e.scope?n("div",e._l(e.published,(function(e,t){return n("Publication",{key:t,attrs:{message:e}})})),1):e._e(),"inbox"==e.scope?n("div",e._l(e.inbox,(function(e,t){return n("SignedMessage",{key:t,attrs:{message:e}})})),1):e._e(),"outbox"==e.scope?n("div",e._l(e.outbox,(function(e,t){return n("SignedMessage",{key:t,attrs:{message:e}})})),1):e._e()],1)])},ee=[],te=(n("d3b7"),n("25f0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"avatar"}},[n("div",{attrs:{id:"name"}},[n("h3",[e._v(e._s(e.name))])]),"qr"==e.showImg?n("AddressQR",{attrs:{address:e.address}}):e._e(),n("div",{attrs:{id:"address"}},["address"==e.showImg?n("AddressSquared",{attrs:{address:e.address}}):e._e()],1),n("div",{attrs:{id:"qr"}},[n("a",{class:{selected:"qr"==e.showImg},on:{click:function(t){return e.showQR()}}},[e._v("QRCode")]),e._v(" - "),n("a",{class:{selected:"address"==e.showImg},on:{click:function(t){return e.showAddress()}}},[e._v("Address")])])],1)}),ne=[],se=(n("a15b"),n("b0c0"),n("d1e4")),oe={name:"Avatar",components:{AddressSquared:T,AddressQR:Y},props:["address"],data:function(){return{avatarUrl:n("35b8"),showImg:"qr"}},computed:{name:function(){return this.address?se.name(this.address).join(" "):"Sans nom"}},methods:{showQR:function(){this.showImg="qr"},showAddress:function(){this.showImg="address"},showAvatar:function(){this.showImg="avatar"},goToAccount:function(){this.$router.push("/signup")}},mounted:function(){console.log(1),console.log(this.address)}},re=oe,ae=(n("928f"),Object(d["a"])(re,te,ne,!1,null,"379359bf",null)),ie=ae.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"MessageInput"}},[n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{id:"textbox",placeholder:"Votre message publique",rows:"1",autofocus:""},domProps:{value:e.content},on:{keydown:e.autogrow,input:function(t){t.target.composing||(e.content=t.target.value)}}})]),n("div",{attrs:{id:"send"}},[n("button",{staticClass:"button public",on:{click:function(t){return e.sendSignedMessage()}}},[e._v("Envoyer un message public")])])])},ue=[],de={name:"MessageInput",data:function(){return{content:""}},props:["address"],methods:{sendSignedMessage:function(){this.$store.commit({type:"sendSignedMessage",content:this.content,receiver:this.address}),this.content="",this.autogrow()},refresh:function(){this.$store.commit({type:"loadMessages",address:this.address})},autogrow:function(){setTimeout((function(){var e=document.querySelector("textarea");e.style.cssText="height:auto;";var t=e.scrollHeight-20;e.style.height=t+"px"}),0)}},created:function(){this.autogrow()}},le=de,pe=(n("7453"),Object(d["a"])(le,ce,ue,!1,null,null,null)),he=pe.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"post"}},[e.message.author!=e.message.receiver?n("div",{attrs:{id:"header"}},[e.message.author!=e.address?n("div",{staticClass:"right"},[e._v(" => "),n("a",{on:{click:function(t){return e.goToAuthor()}}},[e._v(e._s(e.author_name))])]):e._e(),e.message.author==e.address?n("div",{staticClass:"left"},[n("a",{on:{click:function(t){return e.goToReceiver()}}},[e._v(e._s(e.receiver_name))]),e._v(" : ")]):e._e()]):e._e(),n("div",{attrs:{id:"message"}},[e._v(" "+e._s(e.message.content)+" ")])])},fe=[],ve=n("d1e4"),ge=n.n(ve),be={name:"Message",props:["message"],methods:{goToAuthor:function(){this.$router.push({name:"user",params:{address:this.message.author}})},goToReceiver:function(){this.$router.push({name:"user",params:{address:this.message.receiver}})}},computed:{author_name:function(){return ge.a.name(this.message.author).join(" ")},receiver_name:function(){return ge.a.name(this.message.receiver).join(" ")},address:function(){return this.$route.params.address}}},Ae=be,we=(n("0c40"),Object(d["a"])(Ae,me,fe,!1,null,"2e419564",null)),_e=we.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"post"}},[n("div",{attrs:{id:"message"}},[e._v(" "+e._s(e.message.content)+" ")])])},Ce=[],ke={name:"Publication",props:["message"],methods:{goToAuthor:function(){this.$router.push({name:"user",params:{address:this.message.author}})},goToReceiver:function(){this.$router.push({name:"user",params:{address:this.message.receiver}})}},computed:{author_name:function(){return ge.a.name(this.message.author).join(" ")},receiver_name:function(){return ge.a.name(this.message.receiver).join(" ")},address:function(){return this.$route.params.address}}},Se=ke,xe=(n("a648"),Object(d["a"])(Se,ye,Ce,!1,null,"5f6a8d08",null)),je=xe.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"contact"}},[n("a",{on:{click:function(t){return e.goToUser()}}},[e._v(" "+e._s(e.nameOf(e.address))+" ")])])},Oe=[],Ee=n("d1e4"),Te={name:"Contact",props:["address"],methods:{goToUser:function(){this.$router.push("/u/".concat(this.address))},nameOf:function(e){return Ee.name(e).join(" ")}},computed:{url:function(){return"".concat(U.vue_url,"/u/").concat(this.address)}}},Ie=Te,Me=Object(d["a"])(Ie,Pe,Oe,!1,null,"02cba54c",null),Be=Me.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"side"}},[n("Avatar",{attrs:{address:e.address}}),e.owned?n("div",[n("button",{staticClass:"button",attrs:{id:"account"},on:{click:function(t){return e.$router.push("/signup")}}},[e._v("Mon compte")])]):e._e(),e.owned?e._e():n("div",[n("button",{staticClass:"button",attrs:{id:"privateMessage"},on:{click:function(t){return e.goToMessaging()}}},[e._v("Envoyer un message (ou Conversation)")]),n("button",{staticClass:"button",attrs:{id:"privateMessage"},on:{click:function(e){}}},[e._v("Ecrire une lettre")]),n("button",{staticClass:"button",attrs:{id:"addContact"},on:{click:function(t){return e.addContact()}}},[e._v("Suivre (Signature)")])])],1)},Qe=[],qe={components:{Avatar:ie},props:["address","owned"]},Ue=qe,Ve=Object(d["a"])(Ue,Ne,Qe,!1,null,null,null),ze=Ve.exports,De={name:"Signup",components:{Avatar:ie,SignedMessageInput:he,SignedMessage:_e,Publication:je,Contact:Be,Side:ze},data:function(){return{scope:"published",inbox:[],outbox:[],published:[],followers:[],following:[]}},computed:{account:function(){return this.$store.state.account},address:function(){return this.$route.params.address},myself:function(){return!!this.account&&this.address==this.account.address}},methods:{logout:function(){this.$router.push("/")},goToMessaging:function(){this.$router.push("/m/".concat(this.address))},goToAccount:function(){this.$router.push("/signup")},addContact:function(){var e={author:this.account.address,receiver:this.address};fetch("".concat(U.url,"/").concat(this.address,"/contacts"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),this.followers.push(e.author)},fetch:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=this;fetch("".concat(U.api,"/u/").concat(this.address)).then((function(e){return e.json()})).then((function(t){e.published=t.published,e.inbox=t.inbox,e.outbox=t.outbox,e.followers=t.followers,e.following=t.following}))}))},mounted:function(){this.scope="published",this.fetch()},watch:{"$route.params.address":function(){this.fetch()}}},Ye=De,He=(n("da82"),Object(d["a"])(Ye,X,ee,!1,null,"5b247ab4",null)),Je=He.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"messaging"}},[n("div",{attrs:{id:"side"}},[n("h4",{staticClass:"title"},[e._v("Utilisateurs")]),n("div",{staticClass:"user top"},[n("b",[e._v(e._s(e.get_name(e.receiver)))])]),e._l(e.contacts,(function(t){return n("div",{key:t,staticClass:"user"},[n("a",{on:{click:function(n){return e.goToUser(t)}}},[e._v(" "+e._s(e.get_name(t))+" ")])])})),n("h4",{staticClass:"title"},[e._v("Groupes")]),n("a",[e._v("Creer un groupe")])],2),n("div",{attrs:{id:"main"}},[n("PrivateMessageInput",{attrs:{address:e.receiver},on:{post:e.post}}),e._l(e.messages,(function(t,s){return n("PrivateMessage",{key:s,attrs:{message:t,sent:t.author==e.receiver}})}))],2)])},Re=[],Fe=n("5530"),Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"MessageInput"}},[n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{id:"textbox",placeholder:"Votre message privé",rows:"1",autofocus:""},domProps:{value:e.content},on:{keydown:e.autogrow,input:function(t){t.target.composing||(e.content=t.target.value)}}})]),n("div",{attrs:{id:"send"}},[n("button",{staticClass:"button private",on:{click:function(t){return e.sendPrivateMessage()}}},[e._v("Envoyer un message privé")])])])},$e=[],We={name:"MessageInput",data:function(){return{content:""}},props:["address"],methods:{sendPrivateMessage:function(){this.$emit("post",this.content),this.content="",this.autogrow()},refresh:function(){this.$store.commit({type:"loadMessages",address:this.address})},autogrow:function(){setTimeout((function(){var e=document.querySelector("textarea");e.style.cssText="height:auto;";var t=e.scrollHeight-20;e.style.height=t+"px"}),0)}},created:function(){this.autogrow()}},Ke=We,Ze=(n("9590"),Object(d["a"])(Ke,Ge,$e,!1,null,null,null)),Xe=Ze.exports,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{sent:e.sent},attrs:{id:"messageBox"}},[n("span",{class:{sent:e.sent},attrs:{id:"message"}},[e._v(" "+e._s(e.message.content)+" ")])])},tt=[],nt={name:"Message",props:["message","sent"],methods:{author_name:function(){return ge.a.name(this.message.author)},receiver_name:function(){return ge.a.name(this.message.receiver)}}},st=nt,ot=(n("18e0"),Object(d["a"])(st,et,tt,!1,null,"7893afe0",null)),rt=ot.exports,at={name:"Messaging",components:{PrivateMessageInput:Xe,PrivateMessage:rt},data:function(){return{messages:[],loader:0}},methods:{get_name:function(e){return e?ge.a.name(e).join(" "):""},goToUser:function(e){this.$router.push("/m/".concat(e))},loadMessages:function(){var e=this;fetch("".concat(U.url,"/m/").concat(this.account.address)).then((function(e){return e.json()})).then((function(t){for(var n=0;n<t.length;n++)try{t[n].author==e.account.address?t[n].content=ge.a.decrypt(e.$store.state.account,t[n].receiver,t[n].hidden_content):t[n].content=ge.a.decrypt(e.$store.state.account,t[n].author,t[n].hidden_content)}catch(s){t[n].content="Error"}e.messages=t}))},post:function(e){var t=ge.a.encrypt(this.account,this.receiver,e),n={author:this.account.address,receiver:this.receiver,hidden_content:t};fetch("".concat(U.url,"/").concat(this.account.address,"/private_messages"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),this.messages.push(Object(Fe["a"])(Object(Fe["a"])({},n),{content:e}))}},computed:{account:function(){return this.$store.state.account},receiver:function(){return this.$route.params.address},address_name:function(){return ge.a.name(this.address).join(" ")},contacts:function(){return this.$store.getters.contacts}},mounted:function(){var e=this;this.$nextTick((function(){return e.loadMessages()})),this.loader=setInterval((function(){e.loadMessages()}),5e3)},destroyed:function(){clearInterval(this.loader)}},it=at,ct=(n("7909"),Object(d["a"])(it,Le,Re,!1,null,"bc670d84",null)),ut=ct.exports,dt=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},lt=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",[e._v("Safebook")]),s("p",[e._v("Safebook est un réseau social cryptographique, libre (open source) et décentralisé de fait.")]),s("p",[e._v("Contrairement aux réseaux sociaux traditionels, Safebook utilise la cryptographie pour assuer la souvraineté des utilisateurs."),s("br"),e._v(" Les utilisateurs ont le contrôle sur le chiffrement et la verification du contenu. "),s("br"),e._v(" Ce qui garantie le bon fonctionnement sans avoir besoin de faire confiance à un tier (une entreprise, un serveur, ...).")]),s("h3",[e._v("Carte d'identité")]),s("p",[e._v("Vous possedez une "),s("a",{attrs:{href:"#carte-didentite"}},[e._v("carte d'identité")]),e._v("."),s("br"),e._v(" Elle permet à d'autres personnes de s'assurer de votre identité cryptographique.")]),s("p",[e._v("Elle peut être sous forme d'un QR code :")]),s("p",[s("img",{attrs:{alt:"QRCode",src:n("507e")}})]),s("p",[e._v("Ou sous la forme d'une addresse :")]),s("blockquote",[s("b",[e._v("SB34PxQi9hhfys6oWPwHrvsKs6onxCyfzYVeXcKwBTQuDA2VM2")])]),s("p",[e._v("Vous pouvez envoyer des messages publics. "),s("br"),e._v(" Les autres utilisateurs pourront vérifier qu'ils viennent vraiment de vous.")]),s("p",[e._v("Vous pouvez envoyer des messages privés. "),s("br"),e._v(" Ils sont chiffrés de tel manière que seul vous et vos interlocuteurs pourront les lire.")]),s("p",[s("small",[e._v("On peut imaginer de l'imprimer sur un sticker, un mug, un T-shirt, ...")])]),s("h3",[e._v("Coffre fort")]),s("p",[e._v("Vous possedez également un coffre-fort cryptographique."),s("br"),e._v(" Il garantit mathématiquement l'accés au compte."),s("br"),e._v(" C'est comme un mot de passe qui vous permet d'accéder à vos clés de chiffrement."),s("br")]),s("p",[e._v("Il se présente sous la forme d'un un mot de passe comme celui ci:")]),s("blockquote",[s("b",[e._v("uPyibSL58eJ1eeCN2scuUf7v5FN4")])]),s("p",[e._v("Ou d'une liste de mots mnémotechnique comme celle ci :")]),s("blockquote",[s("div",{attrs:{id:"worldlist"}},[s("div",{staticClass:"word"},[e._v("disposer")]),s("div",{staticClass:"word"},[e._v("papoter")]),s("div",{staticClass:"word"},[e._v("loyal")]),s("div",{staticClass:"word"},[e._v("écureuil")]),s("div",{staticClass:"word"},[e._v("paresse")]),s("div",{staticClass:"word"},[e._v("traction")]),s("div",{staticClass:"word"},[e._v("toponyme")]),s("div",{staticClass:"word"},[e._v("serein")]),s("div",{staticClass:"word"},[e._v("vedette")]),s("div",{staticClass:"word"},[e._v("studieux")]),s("div",{staticClass:"word"},[e._v("meilleur")]),s("div",{staticClass:"word"},[e._v("tricoter ")])])])])}],pt={name:"What",data:function(){return{}},methods:{}},ht=pt,mt=(n("7e9f"),Object(d["a"])(ht,dt,lt,!1,null,"20c36282",null)),ft=mt.exports,vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-markdown",{attrs:{id:"markdown"}},[e._v(" "+e._s(e.content)+" ")])},gt=[],bt=n("9ce6"),At=n.n(bt),wt="# Serverless social network\n\nSafebook est pensé pour pouvoir fonctionner dans des configurations distribués et décentralisés ou même sans serveur\n\nNous utiliseront la cryptographie pour assurer les fonctions suivantes :\n\n- Confidentialité : Assurer que seul nos correspondants peuvent acceder aux messages, même si le réseau n'est pas fiable.\n- Integrité : Assurer qu'un message provient bien de l'émetteur, même si le réseau n'est pas fiable\n- Integrité : WIP: Assurer qu'on est bien à jour (qu'on a l'intégralité des messages)\n- Assurer un espace de stockage sécurisé (comme mega)\n- Fonctionner dans des réseaux peu fiables et censurés.\n- WIP: Permettre l'envoi d'argent par une cryptomonnaie\n\n# Idéologie\n\n- Être minimaliste et fonctionnel.\n- Être un outil d'autodéfense numérique.\n- Être une aide et non un frein dans la gestion de son réseau (pas de feed organisé via du machine learning, facilités pour retrouver les messages)\n\n# Comptes\n\nUn compte est avant tout un secret (mot de passe ou phrase mnémotechnique) qu'on obtient lors de la création du compte.\n\nCe secret permet de regénérer l'ensemble des clef publiques et privés.\n\nLes comptes ne sont donc pas stockés sur le serveur.\nParfois on y déposera quand même un message d'annonce associé à sa clef publique.\nSinon seuls les messages sont stockés.\n\n# Carte d'identité\n\nUne carte d'identité est avant tout un grand nombre (32 bits) qui est la clef publique de l'utilisateur.\n\nElle contient toutes les informations pour vérifier l'integrité de ses messages publiques,\nou, plus souvent, pour communiquer de manière chiffré avec l'utilisateur.\n\nElle peut être absente ou présente sur le serveur dans un message d'annonce.\n\n# Message d'annonce.\n\nLe message d'annonce est un message auto-signé par le propriétaire du compte.\n\nIl contient des information additionnels : nom ou pseudo, image ou photo, etc...\n\n# Message publique\n\nUn utilisateur peut envoyer des messages publiques signés (texte, photos, ...)\n\n# Groupes publiques\n\nWIP\n\n# Message privés\n\nUn message privé est envoyé à un utilisateur ou un groupe et est chiffré de bout en bout.\n\nOn peut envoyer un message privé sans être connecté, dans ce cas un compte temporaire et anonyme est généré.\n\n# Groupe privé\n\nUn groupe privé ressemble beaucoup à un utilisateur partagé.\n\n- Invitation: Partage de la clef privée du groupe\n- Revocation: Impossible\n\n\n# Signer des messages JSON\n\nGros WIP.\n\nIl faut pouvoir encoder uniquement les messages (espaces, ordre des champs...)\ndans tous les languages de programmation.\n\nOn recherche une forme canionique du JSON, et celle utilisé par JSON-LD\nsemble beaucoup trop lourde. MessagePack semble bien mais n'a pas non\nplus de forme invariante du a des details d'implémentations.\n\n(Est-ce qu'on a vraiment besoin de ca ? On pourrait stocker les json en string\net juste verifier la chaine de chars ?)\n\n## Tree of interest\n\nThe tree of interest is a way to lookup for addresses without sharing the exact addresses\n\nex:\n....S...\n....|...\n....B...\n.|.|..|..|..|\n.k.j..1..4..5\n.|.......|..|\nj.r      3..N\nto listen for SBkj\\* SBkr\\* SBj\\* SB1\\* SB43\\* and SB5N\\*\n\n# Addresses (WIP)\n\nAddresses in safebook are 32-bit integers encoded with base58.\n\nExemple:\n- SBThisisASampleSBAddressDoNotUseIt\n- ThisCanBeAUserorAGroupShadowAddres\n\nAddress represent a user or a private group. (A private group in safebook\nis really just a shared user)\n\nThere is two kind of addresses: *direct* and *shadow*.\n\n*Direct addresses* identify a user or group and solely allow oneself to send\nencrypted message or to authetify publications.\n\nThey represent a curve25519/ed25519 public key.\n\nFor a user, they are derived directly from the safebook passphrase.\n\nThey often start with SB, sb, Sb or sB (vanity addresses) to differentiate\nthem from other addresses (bitcoin, ...)\n\n*Shadow addresses* aims to tackle the problem of anonymity. but they require a prior of handshake.\n\nThey represent a random 32-bit integer (and thus rarely start with SB)\n\n- 1-to-1 private messages shadow address are derived from the ecdh common message/key and thus can be recomputed by both parties.\n\n  It is a common way to send a encrypted message to a user without leaking too much metadata\n\n  To listen to shadow address you must follow this person\n\n- group shadow address\n\n  They represent alias for the group name\n\n- one-time generated \n\nExemple:\n- SBThisisASampleSBAddressDoNotUseIt\n- ThisCanBeAUserorAGroupShadowAddres\n\n[TECHNIQUE]\n(WIP because it's probably better to seperate ECDH and ECDSA)\nNous utiliseront une même clé Curve25519 pour DH ET la signatures.\n(Le papier [[https://eprint.iacr.org/2011/615][On the Joint Security of Encryption and Signature in EMV]] [[[https://crypto.stackexchange.com/questions/3260/using-same-keypair-for-diffie-hellman-and-signing][2]]] prouve la sécurité d'un tel usage dans des conditions similaires.\n\n\n",_t={name:"How",components:{VueMarkdown:At.a},data:function(){return{content:wt}}},yt=_t,Ct=(n("7571"),Object(d["a"])(yt,vt,gt,!1,null,null,null)),kt=Ct.exports,St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("vue-markdown",[e._v(" "+e._s(e.content)+" ")])},xt=[],jt="# About\n\n## History\n\nSafebook is a personal project that started as a browser plugin encrypting\nfacebook messages before they are sent and decrypting safebook messages when\nfound\n\nBecause facebook is listening to every keystroke (for suggestions, etc) it is\nnot possible to hide messages this way so it has been abandoned in profit of\na separate website.\n\nIt was abandonned for 5+ years before this new attemps.\nNew ideas were coined like base58 encoding for address\nwith SB prefix vanity addresses, shadow addresses, signing for publication,\nand now aim to be server independant to allow different server\nimplementations (and hopefully a decentralised one)\n\n## Other tools\n\n### PGP/GPG\nPGP is the reference.\nIt's quite old but it provides state-of-the-art cryptographic. difficult to use\n\n### Minilock\n\n### Bitmessage\n\n## Crypto libraries\nsjcl\nnacl\ncelle de l'auteur de real world crypto\nopenssl\n...\n",Pt={name:"About",components:{VueMarkdown:At.a},data:function(){return{content:jt}}},Ot=Pt,Et=Object(d["a"])(Ot,St,xt,!1,null,"7f0b3227",null),Tt=Et.exports;s["a"].use(g["a"]);var It=new g["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:C},{path:"/signup",name:"signup",component:R},{path:"/signin",name:"signin",component:Z},{path:"/u/:address",name:"user",component:Je},{path:"/m",name:"messaging",component:ut},{path:"/m/:address",name:"messaging",component:ut},{path:"/what",name:"what",component:ft},{path:"/how",name:"how",component:kt},{path:"/about",name:"about",component:Tt}]}),Mt=n("2f62");s["a"].use(Mt["a"]);var Bt=new Mt["a"].Store({state:{account:null,user:null,inbox:[],outbox:[],pms:[],contacts:[]},mutations:{createAccount:function(e){e.account=ge.a.generate_account(),localStorage.setItem("mnemonic",e.account.mnemonic)},restoreAccount:function(e){var t=localStorage.getItem("mnemonic");t&&(e.account=ge.a.load(t))},loadAccount:function(e,t){try{e.account=ge.a.load(t.mnemonic),localStorage.setItem("mnemonic",e.account.mnemonic),It.push("/signup")}catch(n){window.alert("Mot de passe invalide")}},logout:function(e){e.account=null,localStorage.removeItem("mnemonic")},selectUser:function(e,t){e.user=t.address},loadInbox:function(e,t){e.inbox=[],fetch("".concat(U.url,"/").concat(t.address,"/inbox")).then((function(e){return e.json()})).then((function(t){e.inbox=t}))},loadOutbox:function(e,t){e.outbox=[],fetch("".concat(U.url,"/").concat(t.address,"/outbox")).then((function(e){return e.json()})).then((function(t){e.outbox=t}))},loadPrivateMessages:function(e){fetch("".concat(U.url,"/").concat(e.account.address,"/private_messages")).then((function(e){return e.json()})).then((function(t){for(var n=0;n<t.length;n++)try{t[n].author==e.account.address?t[n].content=ge.a.decrypt(e.account,t[n].receiver,t[n].hidden_content):t[n].content=ge.a.decrypt(e.account,t[n].author,t[n].hidden_content)}catch(s){t[n].content="Error"}e.pms=t}))},sendSignedMessage:function(e,t){var n=ge.a.sign(e.account,t.content),s={author:e.account.address,receiver:t.receiver,content:t.content,sig:n};fetch("".concat(U.url,"/").concat(e.account.address,"/inbox"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),e.inbox.push(s),s.receiver==e.account.address&&e.outbox.push(s)},sendPrivateMessage:function(e,t){console.log(e.account,t.receiver,t.content);var n=ge.a.encrypt(e.account,t.receiver,t.content),s={author:e.account.address,receiver:t.receiver,hidden_content:n};fetch("".concat(U.url,"/").concat(e.account.address,"/private_messages"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),e.pms.push(Object(Fe["a"])(Object(Fe["a"])({},s),{content:t.content}))},loadContacts:function(e,t){e.contacts=[],fetch("".concat(U.url,"/").concat(t.address,"/contacts")).then((function(e){return e.json()})).then((function(t){e.contacts=t}))},deleteContact:function(e,t){fetch("".concat(U.url,"/").concat(t.address,"/contacts"),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({author:e.account.address,receiver:t.address})}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},actions:{},getters:{}});s["a"].config.productionTip=!1,new s["a"]({router:It,store:Bt,render:function(e){return e(v)}}).$mount("#app")},6:function(e,t){},"61ee":function(e,t,n){"use strict";n("f407")},7:function(e,t){},"73e2":function(e,t,n){},7453:function(e,t,n){"use strict";n("4d97")},7571:function(e,t,n){"use strict";n("73e2")},7909:function(e,t,n){"use strict";n("286c")},"7e9f":function(e,t,n){"use strict";n("a5d8")},8:function(e,t){},"85ec":function(e,t,n){},"877b":function(e,t,n){},8907:function(e,t,n){},"928f":function(e,t,n){"use strict";n("877b")},9590:function(e,t,n){"use strict";n("3373")},a5d8:function(e,t,n){},a648:function(e,t,n){"use strict";n("ec68")},b50f:function(e,t,n){},bd44:function(e,t,n){},c25e:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},da82:function(e,t,n){"use strict";n("26c9")},ec68:function(e,t,n){},f407:function(e,t,n){},f9de:function(e,t,n){"use strict";n("bd44")}});
//# sourceMappingURL=app.cae9384d.js.map